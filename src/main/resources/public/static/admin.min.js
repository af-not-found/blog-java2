/*!
 * marked - a markdown parser
 * v0.2.10
 * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 */
;(function(){var d={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:k,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:k,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:k,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};d.bullet=/(?:[*+-]|\d+\.)/;d.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;d.item=c(d.item,"gm")(/bull/g,d.bullet)();d.list=c(d.list)(/bull/g,d.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)();d._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b";d.html=c(d.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,d._tag)();d.paragraph=c(d.paragraph)("hr",d.hr)("heading",d.heading)("lheading",d.lheading)("blockquote",d.blockquote)("tag","<"+d._tag)("def",d.def)();d.normal=h({},d);d.gfm=h({},d.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/});d.gfm.paragraph=c(d.paragraph)("(?!","(?!"+d.gfm.fences.source.replace("\\1","\\2")+"|"+d.list.source.replace("\\1","\\3")+"|")();d.tables=h({},d.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});function b(l){this.tokens=[];this.tokens.links={};this.options=l||a.defaults;this.rules=d.normal;if(this.options.gfm){if(this.options.tables){this.rules=d.tables}else{this.rules=d.gfm}}}b.rules=d;b.lex=function(n,l){var m=new b(l);return m.lex(n)};b.prototype.lex=function(l){l=l.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n");return this.token(l,true)};b.prototype.token=function(n,u){var n=n.replace(/^ +$/gm,""),r,p,w,s,v,x,m,q,o;while(n){if(w=this.rules.newline.exec(n)){n=n.substring(w[0].length);if(w[0].length>1){this.tokens.push({type:"space"})}}if(w=this.rules.code.exec(n)){n=n.substring(w[0].length);w=w[0].replace(/^ {4}/gm,"");this.tokens.push({type:"code",text:!this.options.pedantic?w.replace(/\n+$/,""):w});continue}if(w=this.rules.fences.exec(n)){n=n.substring(w[0].length);this.tokens.push({type:"code",lang:w[2],text:w[3]});continue}if(w=this.rules.heading.exec(n)){n=n.substring(w[0].length);this.tokens.push({type:"heading",depth:w[1].length,text:w[2]});continue}if(u&&(w=this.rules.nptable.exec(n))){n=n.substring(w[0].length);x={type:"table",header:w[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:w[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:w[3].replace(/\n$/,"").split("\n")};for(q=0;q<x.align.length;q++){if(/^ *-+: *$/.test(x.align[q])){x.align[q]="right"}else{if(/^ *:-+: *$/.test(x.align[q])){x.align[q]="center"}else{if(/^ *:-+ *$/.test(x.align[q])){x.align[q]="left"}else{x.align[q]=null}}}}for(q=0;q<x.cells.length;q++){x.cells[q]=x.cells[q].split(/ *\| */)}this.tokens.push(x);continue}if(w=this.rules.lheading.exec(n)){n=n.substring(w[0].length);this.tokens.push({type:"heading",depth:w[2]==="="?1:2,text:w[1]});continue}if(w=this.rules.hr.exec(n)){n=n.substring(w[0].length);this.tokens.push({type:"hr"});continue}if(w=this.rules.blockquote.exec(n)){n=n.substring(w[0].length);this.tokens.push({type:"blockquote_start"});w=w[0].replace(/^ *> ?/gm,"");this.token(w,u);this.tokens.push({type:"blockquote_end"});continue}if(w=this.rules.list.exec(n)){n=n.substring(w[0].length);s=w[2];this.tokens.push({type:"list_start",ordered:s.length>1});w=w[0].match(this.rules.item);r=false;o=w.length;q=0;for(;q<o;q++){x=w[q];m=x.length;x=x.replace(/^ *([*+-]|\d+\.) +/,"");if(~x.indexOf("\n ")){m-=x.length;x=!this.options.pedantic?x.replace(new RegExp("^ {1,"+m+"}","gm"),""):x.replace(/^ {1,4}/gm,"")}if(this.options.smartLists&&q!==o-1){v=d.bullet.exec(w[q+1])[0];if(s!==v&&!(s.length>1&&v.length>1)){n=w.slice(q+1).join("\n")+n;q=o-1}}p=r||/\n\n(?!\s*$)/.test(x);if(q!==o-1){r=x.charAt(x.length-1)==="\n";if(!p){p=r}}this.tokens.push({type:p?"loose_item_start":"list_item_start"});this.token(x,false);this.tokens.push({type:"list_item_end"})}this.tokens.push({type:"list_end"});continue}if(w=this.rules.html.exec(n)){n=n.substring(w[0].length);this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:w[1]==="pre"||w[1]==="script"||w[1]==="style",text:w[0]});continue}if(u&&(w=this.rules.def.exec(n))){n=n.substring(w[0].length);this.tokens.links[w[1].toLowerCase()]={href:w[2],title:w[3]};continue}if(u&&(w=this.rules.table.exec(n))){n=n.substring(w[0].length);x={type:"table",header:w[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:w[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:w[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(q=0;q<x.align.length;q++){if(/^ *-+: *$/.test(x.align[q])){x.align[q]="right"}else{if(/^ *:-+: *$/.test(x.align[q])){x.align[q]="center"}else{if(/^ *:-+ *$/.test(x.align[q])){x.align[q]="left"}else{x.align[q]=null}}}}for(q=0;q<x.cells.length;q++){x.cells[q]=x.cells[q].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */)}this.tokens.push(x);continue}if(u&&(w=this.rules.paragraph.exec(n))){n=n.substring(w[0].length);this.tokens.push({type:"paragraph",text:w[1].charAt(w[1].length-1)==="\n"?w[1].slice(0,-1):w[1]});continue}if(w=this.rules.text.exec(n)){n=n.substring(w[0].length);this.tokens.push({type:"text",text:w[0]});continue}if(n){throw new Error("Infinite loop on byte: "+n.charCodeAt(0))}}return this.tokens};var g={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:k,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:k,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};g._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/;g._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;g.link=c(g.link)("inside",g._inside)("href",g._href)();g.reflink=c(g.reflink)("inside",g._inside)();g.normal=h({},g);g.pedantic=h({},g.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});g.gfm=h({},g.normal,{escape:c(g.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:c(g.text)("]|","~]|")("|","|https?://|")()});g.breaks=h({},g.gfm,{br:c(g.br)("{2,}","*")(),text:c(g.gfm.text)("{2,}","*")()});function i(l,m){this.options=m||a.defaults;this.links=l;this.rules=g.normal;this.renderer=this.options.renderer||new f;if(!this.links){throw new Error("Tokens array requires a `links` property.")}if(this.options.gfm){if(this.options.breaks){this.rules=g.breaks}else{this.rules=g.gfm}}else{if(this.options.pedantic){this.rules=g.pedantic}}}i.rules=g;i.output=function(o,l,m){var n=new i(l,m);return n.output(o)};i.prototype.output=function(q){var m="",o,p,l,n;while(q){if(n=this.rules.escape.exec(q)){q=q.substring(n[0].length);m+=n[1];continue}if(n=this.rules.autolink.exec(q)){q=q.substring(n[0].length);if(n[2]==="@"){p=n[1].charAt(6)===":"?this.mangle(n[1].substring(7)):this.mangle(n[1]);l=this.mangle("mailto:")+p}else{p=j(n[1]);l=p}m+=this.renderer.link(l,null,p);continue}if(n=this.rules.url.exec(q)){q=q.substring(n[0].length);p=j(n[1]);l=p;m+=this.renderer.link(l,null,p);continue}if(n=this.rules.tag.exec(q)){q=q.substring(n[0].length);m+=this.options.sanitize?j(n[0]):n[0];continue}if(n=this.rules.link.exec(q)){q=q.substring(n[0].length);m+=this.outputLink(n,{href:n[2],title:n[3]});continue}if((n=this.rules.reflink.exec(q))||(n=this.rules.nolink.exec(q))){q=q.substring(n[0].length);o=(n[2]||n[1]).replace(/\s+/g," ");o=this.links[o.toLowerCase()];if(!o||!o.href){m+=n[0].charAt(0);q=n[0].substring(1)+q;continue}m+=this.outputLink(n,o);continue}if(n=this.rules.strong.exec(q)){q=q.substring(n[0].length);m+=this.renderer.strong(this.output(n[2]||n[1]));continue}if(n=this.rules.em.exec(q)){q=q.substring(n[0].length);m+=this.renderer.em(this.output(n[2]||n[1]));continue}if(n=this.rules.code.exec(q)){q=q.substring(n[0].length);m+=this.renderer.codespan(j(n[2],true));continue}if(n=this.rules.br.exec(q)){q=q.substring(n[0].length);m+=this.renderer.br();continue}if(n=this.rules.del.exec(q)){q=q.substring(n[0].length);m+=this.renderer.del(this.output(n[1]));continue}if(n=this.rules.text.exec(q)){q=q.substring(n[0].length);m+=j(this.smartypants(n[0]));continue}if(q){throw new Error("Infinite loop on byte: "+q.charCodeAt(0))}}return m};i.prototype.outputLink=function(m,n){var l=j(n.href),o=n.title?j(n.title):null;if(m[0].charAt(0)!=="!"){return this.renderer.link(l,o,this.output(m[1]))}else{return this.renderer.image(l,o,j(m[1]))}};i.prototype.smartypants=function(l){if(!this.options.smartypants){return l}return l.replace(/--/g,"\u2014").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")};i.prototype.mangle=function(q){var n="",m=q.length,o=0,p;for(;o<m;o++){p=q.charCodeAt(o);if(Math.random()>0.5){p="x"+p.toString(16)}n+="&#"+p+";"}return n};function f(){}f.prototype.code=function(l,m){if(!m){return"<pre><code>"+j(l,true)+"\n</code></pre>"}return'<pre><code class="'+m+'">'+j(l)+"\n</code></pre>\n"};f.prototype.blockquote=function(l){return"<blockquote>\n"+l+"</blockquote>\n"};f.prototype.html=function(l){return l};f.prototype.heading=function(n,o,m,l){return"<h"+o+">"+n+"</h"+o+">\n"};f.prototype.hr=function(){return"<hr>\n"};f.prototype.list=function(l,m){var n=m?"ol":"ul";return"<"+n+">\n"+l+"</"+n+">\n"};f.prototype.listitem=function(l){return"<li>"+l+"</li>\n"};f.prototype.paragraph=function(l){return"<p>"+l+"</p>\n"};f.prototype.table=function(m,l){return"<table>\n<thead>\n"+m+"</thead>\n<tbody>\n"+l+"</tbody>\n</table>\n"};f.prototype.tablerow=function(l){return"<tr>\n"+l+"</tr>\n"};f.prototype.tablecell=function(o,m){var n=m.header?"th":"td";var l=m.align?"<"+n+' style="text-align:'+m.align+'">':"<"+n+">";return l+o+"</"+n+">\n"};f.prototype.strong=function(l){return"<strong>"+l+"</strong>"};f.prototype.em=function(l){return"<em>"+l+"</em>"};f.prototype.codespan=function(l){return"<code>"+l+"</code>"};f.prototype.br=function(){return"<br>"};f.prototype.del=function(l){return"<del>"+l+"</del>"};f.prototype.link=function(l,o,n){var m='<a href="'+l+'"';if(o){m+=' title="'+o+'"'}m+=">"+n+"</a>";return m};f.prototype.image=function(l,o,n){var m='<img src="'+l+'" alt="'+n+'"';if(o){m+=' title="'+o+'"'}m+=">";return m};function e(l){this.tokens=[];this.token=null;this.options=l||a.defaults;this.options.renderer=this.options.renderer||new f;this.renderer=this.options.renderer}e.parse=function(n,l,m){var o=new e(l,m);return o.parse(n)};e.prototype.parse=function(m){this.inline=new i(m.links,this.options,this.renderer);this.tokens=m.reverse();var l="";while(this.next()){l+=this.tok()}return l};e.prototype.next=function(){return this.token=this.tokens.pop()};e.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};e.prototype.parseText=function(){var l=this.token.text;while(this.peek().type==="text"){l+="\n"+this.next().text}return this.inline.output(l)};e.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth);case"code":return this.renderer.code(this.token.text,this.token.lang);case"table":var p="",r="",n,u,s,l,m;s="";for(n=0;n<this.token.header.length;n++){l={header:true,align:this.token.align[n]};s+=this.renderer.tablecell(this.inline.output(this.token.header[n]),{header:true,align:this.token.align[n]})}p+=this.renderer.tablerow(s);for(n=0;n<this.token.cells.length;n++){u=this.token.cells[n];s="";for(m=0;m<u.length;m++){s+=this.renderer.tablecell(this.inline.output(u[m]),{header:false,align:this.token.align[m]})}r+=this.renderer.tablerow(s)}return this.renderer.table(p,r);case"blockquote_start":var r="";while(this.next().type!=="blockquote_end"){r+=this.tok()}return this.renderer.blockquote(r);case"list_start":var r="",q=this.token.ordered;while(this.next().type!=="list_end"){r+=this.tok()}return this.renderer.list(r,q);case"list_item_start":var r="";while(this.next().type!=="list_item_end"){r+=this.token.type==="text"?this.parseText():this.tok()}return this.renderer.listitem(r);case"loose_item_start":var r="";while(this.next().type!=="list_item_end"){r+=this.tok()}return this.renderer.listitem(r);case"html":var o=!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;return this.renderer.html(o);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};function j(l,m){return l.replace(!m?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(n,m){n=n.source;m=m||"";return function l(o,p){if(!o){return new RegExp(n,m)}p=p.source||p;p=p.replace(/(^|[^\[])\^/g,"$1");n=n.replace(o,p);return l}}function k(){}k.exec=k;function h(o){var m=1,n,l;for(;m<arguments.length;m++){n=arguments[m];for(l in n){if(Object.prototype.hasOwnProperty.call(n,l)){o[l]=n[l]}}}return o}function a(l,n,u){if(u||typeof n==="function"){if(!u){u=n;n=null}n=h({},a.defaults,n||{});var o=n.highlight,s,m,q=0;try{s=b.lex(l,n)}catch(r){return u(r)}m=s.length;var p=function(){var v,w;try{v=e.parse(s,n)}catch(x){w=x}n.highlight=o;return w?u(w):u(null,v)};return p()}try{if(n){n=h({},a.defaults,n)}return e.parse(b.lex(l,n),n)}catch(r){r.message+="\nPlease report this to https://github.com/chjj/marked.";if((n||a.defaults).silent){return"<p>An error occured:</p><pre>"+j(r.message+"",true)+"</pre>"}throw r}}a.options=a.setOptions=function(l){h(a.defaults,l);return a};a.defaults={gfm:true,tables:true,breaks:false,pedantic:false,sanitize:false,smartLists:false,silent:false,smartypants:false,renderer:new f};a.Parser=e;a.parser=e.parse;a.Renderer=f;a.Lexer=b;a.lexer=b.lex;a.InlineLexer=i;a.inlineLexer=i.output;a.parse=a;if(typeof exports==="object"){module.exports=a}else{if(typeof define==="function"&&define.amd){define(function(){return a})}else{this.marked=a}}}).call(function(){return this||(typeof window!=="undefined"?window:global)}());
/*!
 * blog.afnf.net
 */
;afnfblog.entry_changed=false;afnfblog.delayedTids={};afnfblog.delayedExec=function(b,a){var c=afnfblog.delayedTids[b];if(c){clearTimeout(c)}afnfblog.delayedTids[b]=setTimeout(b,a)};afnfblog.update_preview=function(){afnfblog.admin_entry_state_changed(true);var a=function(){var g=$(".textarea_entry");if(g.size()>0){var f=g.val();var d=marked(f);$(".entry_content").html(d);$("#contentHtml").val(d);afnfblog.highlight()}if(afnfblog.isMobile==false){var h=$(".entry_content").height();var c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var b=c*0.6;g.height(h>b?h:b)}};if(afnfblog.isMobile){afnfblog.delayedExec(a,2000)}else{afnfblog.delayedExec(a,300)}};afnfblog.admin_entry_init=function(a){$(a).removeClass("btn-default").addClass("btn-primary");var b=$(".textarea_entry");if(b.size()>0){$(".entry_edit_form_div").on("keyup",".textarea_entry",afnfblog.update_preview);$(".entry_edit_parent_div").on("click",".btn_width",function(){var d=$(this);$(".btn_width").removeClass("btn-primary");d.addClass("btn-primary");var c=d.text();$(".preview_container").css("width",c)});afnfblog.update_preview();afnfblog.admin_entry_state_changed(false)}$(document).on("change","input",function(){afnfblog.admin_entry_state_changed(true)});$(window).on("beforeunload",function(c){if(afnfblog.entry_changed){return t("blog.leave_confirmation")}})};afnfblog.admin_comment_init=function(){$(".btn_comments").removeClass("btn-default").addClass("btn-primary");$(".comments_container").on("click",".shortened_comment",function(a){$(this).removeClass("shortened_comment")});$(".comments_container").on("click",".stateRadio",function(a){$(this).parent("form").submit()})};afnfblog.ajaxSuccess=function(b,a){var c=$(".textarea_entry");if(c.size()>0){afnfblog.admin_entry_state_changed(false);$(".entry_edit_form_div #id").val(a.id)}var c=b.find(".ajaxret");c.text(t("blog.update_ok"));setTimeout(function(){c.text("")},3000)};afnfblog.admin_entry_state_changed=function(a){if(a==false||afnfblog.entry_changed!=a){afnfblog.entry_changed=a;$("#submit_btn").prop("disabled",a==false)}};